<configuration>

    <property name="APP_KEY" value="nMWnKdBvAFvUW8XL" />
    <property name="LOG_URL" value="https://api-logncrash.cloud.toast.com/v2/log" />

    <springProfile name="prod">
        <!-- Console Appender -->
        <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
            <encoder>
                <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n</pattern>
            </encoder>
        </appender>

        <!-- LogNCrash Appender -->
        <appender name="LOGNCRASH" class="com.toast.java.logncrash.logback.LogNCrashHttpAppender">
            <appKey>${APP_KEY}</appKey>
            <url>${LOG_URL}</url>
            <logSource>BookAPI-Test</logSource>
            <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
                <pattern>{"level": "%level", "message": "%message", "timestamp": "%d{yyyy-MM-dd HH:mm:ss}"}</pattern>
            </encoder>
            <!-- Filter logs with INFO level and above -->
            <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
                <level>ERROR</level>
            </filter>
        </appender>

        <!-- Root Logger -->
        <root level="INFO">
            <appender-ref ref="CONSOLE" />
            <appender-ref ref="LOGNCRASH" />
        </root>
    </springProfile>

    <springProfile name="jhs">
        <!-- Console Appender -->
        <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
            <encoder>
                <pattern>%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n</pattern>
            </encoder>
        </appender>

        <!-- LogNCrash Appender -->
        <appender name="LOGNCRASH" class="com.toast.java.logncrash.logback.LogNCrashHttpAppender">
            <appKey>${APP_KEY}</appKey>
            <url>${LOG_URL}</url>
            <logSource>BookAPI-Test</logSource>
            <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
                <pattern>{"level": "%level", "message": "%message", "timestamp": "%d{yyyy-MM-dd HH:mm:ss}"}</pattern>
            </encoder>
            <!-- Filter logs with INFO level and above -->
            <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
                <level>WARN</level>
            </filter>
        </appender>

        <!-- Root Logger -->
        <root level="INFO">
            <appender-ref ref="CONSOLE" />
            <appender-ref ref="LOGNCRASH" />
        </root>
    </springProfile>
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <level>ERROR</level>
    </filter>

</configuration>

